@model Pets_Web.ViewModels.ORDER_HEADERViewModel
@{
	ViewBag.Title = "SalesTotal";
	Layout = "~/Views/Shared/_Layout.cshtml";
}



<div style="padding-top:10px;">


	<div class="panel panel-info">
		<div class="panel-heading ">@Resources.Resource.SalesTotal</div>
		<div id="MemberShipTypeBody" class="panel-body">
			@Html.ValidationSummary(true, "Please Fix The Foloing Error!")

			<div class="col-lg-12">
				<div class="col-lg-4">

					<div class="form-group">
						@Html.LabelFor(m => m.FromDate)
						@Html.TextBoxFor(model => model.FromDate, new { @id = "FromDate", @class = "form-control", @Value = Model.FromDate.ToString("dd/MM/yyyy") })
						@Html.ValidationMessageFor(m => m.FromDate)
					</div>
				</div>
				<div class="col-lg-4">


					<div class="form-group">
						@Html.LabelFor(m => m.ToDate)
						@Html.TextBoxFor(model => model.ToDate, new { @id = "ToDate", @class = "form-control", @Value = Model.ToDate.ToString("dd/MM/yyyy") })
						@Html.ValidationMessageFor(m => m.ToDate)
					</div>

				</div>

				<div class="col-lg-4">
					<div class="form-group">
						<button style="margin-top:25px;" type="submit" class="btn btn-primary add-new" id="GetSalesTotal">@Resources.Resource.Search </button>
					</div>

				</div>


				<div class="col-lg-4">
					<div class="form-group">
						@Html.LabelFor(m => m.PosNo)

						@Html.DropDownListFor(m => m.PosNo, new SelectList(Model.Pos, "BRANCHNO", "BRANCHNM"), Resources.Resource.All, new { @id = "BRANCHNO", @class = "form-control" })
					</div>
				</div>
				<div class="col-lg-4">
					<div class="form-group">
						@Html.LabelFor(m => m.UserNo)

						@Html.DropDownListFor(m => m.UserNo, new SelectList(Model.User, "USER_NO", "USER_NAME"), Resources.Resource.All, new { @id = "USER_NO", @class = "form-control" })
					</div>
				</div>

			</div>




		</div>
	</div>
	<div class="col-lg-4">
		<div class="panel panel-primary">
			<div class="panel-heading">
				@Resources.Resource.SalesHeader
			</div>
			<div class="panel-body">
				<div class="col-md-12">

					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.Sales, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style=" font-size: 14px;font-weight:bold"> <em id="Sales">0</em> </div>

					</div>
					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.Return, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="font-size: 14px;font-weight:bold"><em id="Return">0</em> </div>

					</div>




					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.NetSales, new { @style = "color:maroon;font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="color:maroon;font-size: 14px;font-weight:bold"><em id="NetSales">0</em>  </div>

					</div>



				</div>
			</div>

		</div>
	</div>
	<div class="col-lg-4">
		<div class="panel panel-green">
			<div class="panel-heading">
				@Resources.Resource.SalesDetails
			</div>
			<div class="panel-body">
				<div class="col-md-12">

					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.CashValue, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style=" font-size: 14px;font-weight:bold"> <em id="CashValue">0</em></div>

					</div>
					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.VisaValue, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="font-size: 14px;font-weight:bold"><em id="VisaValue">0</em> </div>

					</div>
					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.MasterValue, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="font-size: 14px;font-weight:bold"><em id="MasterValue">0</em> </div>

					</div>
					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.CreditValue, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="font-size: 14px;font-weight:bold"><em id="CreditValue">0</em> </div>

					</div>
					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.GiftCardValue, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="font-size: 14px;font-weight:bold"><em id="GiftCardValue">0</em> </div>

					</div>
					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.PointValue, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="font-size: 14px;font-weight:bold"><em id="PointValue">0</em> </div>

					</div>
					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.ChequeValue, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="font-size: 14px;font-weight:bold"> <em id="ChequeValue">0</em> </div>

					</div>




					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.TotalPayMethod, new { @style = "color:maroon;font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="color:maroon;font-size: 14px;font-weight:bold"><em id="TotalPayMethod">0</em> </div>

					</div>



				</div>
			</div>

		</div>
	</div>
	<div class="col-lg-4">
		<div class="panel panel-yellow">
			<div class="panel-heading">
				@Resources.Resource.Discount
			</div>
			<div class="panel-body">
				<div class="col-md-12">

					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.SalesDiscount, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style=" font-size: 14px;font-weight:bold"> <em id="SalesDiscount">0</em> </div>

					</div>
					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.ReturnDiscount, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="font-size: 14px;font-weight:bold"><em id="ReturnDiscount">0</em> </div>

					</div>




					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.NetDiscount, new { @style = "color:maroon;font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="color:maroon;font-size: 14px;font-weight:bold"> <em id="NetDiscount">0</em> </div>

					</div>



				</div>
			</div>

		</div>
	</div>
	<div class="col-lg-4">
		<div class="panel panel-red">
			<div class="panel-heading">
				@Resources.Resource.Service
			</div>
			<div class="panel-body">
				<div class="col-md-12">

					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.SalesService, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style=" font-size: 14px;font-weight:bold"> <em id="SalesService">0</em> </div>

					</div>
					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.ReturnService, new { @style = "font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="font-size: 14px;font-weight:bold"><em id="ReturnService">0</em> </div>

					</div>




					<div class="form-group">
						<div class="col-lg-8">@Html.LabelFor(m => m.NetServcie, new { @style = "color:maroon;font-size: 14px;font-weight:bold" })</div>
						<div class="col-lg-4" style="color:maroon;font-size: 14px;font-weight:bold"><em id="NetServcie">0</em> </div>

					</div>

					

				</div>
			</div>

		</div>
	</div>


</div>

<div id="modal-container" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-content">
	</div>
</div>
@section scripts{
	@Scripts.Render("~/bundles/jqueryval");
	<script>
		$(document).ready(function () {
			$.fn.datepicker.defaults.format = "dd/mm/yyyy";
			$('#FromDate').datepicker({
				autoclose: true
			});
			$('#ToDate').datepicker({
				autoclose: true
			});
		var LastId = 1;
		//ClearForm();
	


		$('#tdataTable').on('click', '.js-delete', function (e) {
			$('#modal-container').removeData('bs.modal');
			//var dialog = bootbox.dialog({
			//	title: 'Check Data',
			//	message: '<p><i class="fa fa-spin fa-spinner"></i> Loading...</p>'
			//});
			//dialog.init(function () {
			//	setTimeout(function () {
			//		dialog.modal('hide');


			//	}, 1000);
			//	//
			//});
				e.preventDefault();
				$(this).attr('data-target', '#modal-container');
				$(this).attr('data-toggle', 'modal');
			});

		$('#tdataTable').on('click', '.js-modify', function (e) {
			$('#modal-container').removeData('bs.modal');
			//var dialog = bootbox.dialog({
			//	title: 'Check Data',
			//	message: '<p><i class="fa fa-spin fa-spinner"></i> Loading...</p>'
			//});
			//dialog.init(function () {
			//	setTimeout(function () {
			//		dialog.modal('hide');


			//	}, 1500);
			//	//
			//});
				e.preventDefault();
				$(this).attr('data-target', '#modal-container');
				$(this).attr('data-toggle', 'modal');
			});

		$('#js-addnew').on('click', function (e) {
			$('#modal-container').removeData('bs.modal');
				e.preventDefault();
				$(this).attr('data-target', '#modal-container');
				$(this).attr('data-toggle', 'modal');
			});

			// Attach listener to .modal-close-btn's so that when the button is pressed the modal dialog disappears
			$('#tdataTable').on('click', '.modal-close-btn', function () {
				$('#modal-container').modal('hide');
			});

			//clear modal cache, so that new content can be loaded
			$('#modal-container').on('hidden.bs.modal', function () {
				$(this).removeData('bs.modal');

			});

			$('#CancelModal').on('click', function () {
				return false;
			});


			$(document).on('click', '#save', function () {

				if ($("#DepartmentArName").val() == '') {
					bootbox.alert({
						message: '@Resources.Resource.PleasefillalRequiredfields',
						size: 'small'
					});

				}
				else {


				var dialog = bootbox.dialog({
					title: '@Resources.Resource.PleaseWait',
					message: '<p><i class="fa fa-spin fa-spinner"></i> @Resources.Resource.Saving...</p>',
					closeButton: false
				});


				var dataToSave = {
					DepartmentArName: $("#DepartmentArName").val(),
					DepartmentID: $("#DepartmentID").val(), CompanyModelID: $("#CompanyModelID").val()
				};
				$.ajax({
					type: "POST",
					url: "/Department/Save",
					data: JSON.stringify(dataToSave),
					contentType: 'application/json',
					success: function (data) {
						dialog.modal('hide');
						if (data.Code == 0) {
							toastr.error(data.Msg);
						}
						else if (data.Code == 1) {
							$('#modal-container').modal('hide');
							toastr.success(data.Msg);
							tabelMemRef.ajax.reload();
							ClearForm();
						}

					},
					error: function (data) {
						dialog.modal('hide');
						toastr.error(data);
					}



					});

				}

			});

		  $(document).on('click', '#update', function () {

				if ($("#DepartmentArNameUpd").val() == '') {
					bootbox.alert({
						message: '@Resources.Resource.PleasefillalRequiredfields',
						size: 'small'
					});

				}
			else {


				var dialog = bootbox.dialog({
					title: '@Resources.Resource.PleaseWait',
					message: '<p><i class="fa fa-spin fa-spinner"></i> @Resources.Resource.Saving...</p>',
					closeButton: false
				});


				var dataToSave = {
					DepartmentArName: $("#DepartmentArNameUpd").val(),
					DepartmentID: $("#DepartmentIDUpd").val(), CompanyModelID: $("#CompanyModelID").val()
				};
				$.ajax({
					type: "POST",
					url: "/Department/Update",
					data: JSON.stringify(dataToSave),
					contentType: 'application/json',
					success: function (data) {
						dialog.modal('hide');
						if (data.Code == 0) {
							toastr.error(data.Msg);
						}
						else if (data.Code == 1) {
							$('#modal-container').modal('hide');
							toastr.success(data.Msg);
							tabelMemRef.ajax.reload();
							ClearForm();
						}

					},
					error: function (data) {
						dialog.modal('hide');
						toastr.error(data);
					}


					});

				}

			});


		   



			$(document).on('click', '#GetSalesTotal', function () {
			   var dialog = bootbox.dialog({
				  title: '@Resources.Resource.PleaseWait',
				  message: '<p><i class="fa fa-spin fa-spinner"></i> @Resources.Resource.PleaseWait...</p>',
				  closeButton: false
				});

				var dataToSave = {
					FromDate: $("#FromDate").val(),
					ToDate: $("#ToDate").val(),
					BRANCHNO: $("#BRANCHNO").val(),
					USER_NO: $("#USER_NO").val()

				};
				$.ajax({
					type: "POST",
					url: "/Home/GetSalesTotal",
					data: JSON.stringify(dataToSave),
					contentType: 'application/json',
					success: function (data) {
			

						$('#modal-container').modal('hide');
						dialog.modal('hide');

						if (data.ResalutCode == 0) {
							toastr.success(data.ResaultMsg);
						}
						else if (data.ResalutCode == 1) {

							toastr.warning(data.ResaultMsg);

						}
						else if (data.ResalutCode == 2) {

							toastr.error(data.ResaultMsg);

						}




						$("#Sales").html('0.000');
						$("#Sales").html(data.Sales);


						$("#Return").html('0.000');
						$("#Return").html(data.Return);


						$("#NetSales").html('0.000');
						$("#NetSales").html(data.NetSales);




						$("#SalesDiscount").html('0.000');
						$("#SalesDiscount").html(data.SalesDiscount);


						$("#ReturnDiscount").html('0.000');
						$("#ReturnDiscount").html(data.ReturnDiscount);


						$("#NetDiscount").html('0.000');
						$("#NetDiscount").html(data.NetDiscount);


						$("#SalesService").html('0.000');
						$("#SalesService").html(data.SalesService);


						$("#ReturnService").html('0.000');
						$("#ReturnService").html(data.ReturnService);


						$("#NetServcie").html('0.000');
						$("#NetServcie").html(data.NetServcie);


						$("#CashValue").html('0.000');
						$("#CashValue").html(data.CashValue);


						$("#CreditValue").html('0.000');
						$("#CreditValue").html(data.CreditValue);

						$("#VisaValue").html('0.000');
						$("#VisaValue").html(data.VisaValue);


						$("#MasterValue").html('0.000');
						$("#MasterValue").html(data.MasterValue);


						$("#GiftCardValue").html('0.000');
						$("#GiftCardValue").html(data.GiftCardValue);


						$("#PointValue").html('0.000');
						$("#PointValue").html(data.PointValue);


						$("#ChequeValue").html('0.000');
						$("#ChequeValue").html(data.ChequeValue);


						$("#TotalPayMethod").html('0.000');
						$("#TotalPayMethod").html(data.TotalPayMethod);


					   




					},
					error: function (data) {
						dialog.modal('hide');
						toastr.error(data);
						console.log(data);
					}

				});
		});









	});


	</script>


}



