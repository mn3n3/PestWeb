@model PetsWeb.ViewModels.CountrySearchFilterVM
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .dt-button {
        display: none !important;
    }
</style>

<div class="panel panel-primary">
    <div class="panel-heading">
        @Resources.Resource.Country
    </div>
    <div class="panel-body">
        <div class="col-lg-12">
            <div class="col-lg-2">
                <div class="form-group">
                    @Html.LabelFor(m => m.CounryName)
                </div>
            </div>
            <div class="col-lg-4">
                <div class="form-group">
                    @Html.TextBoxFor(m => m.CounryName, new { @id = "CounryName", @class = "form-control", @type = "number", @min = "0", @style = "max-width:480px" })
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <a class="btn btn-info    fa fa-search" id="btnSearch">@Resources.Resource.Search</a>
            <a class="btn btn-primary fa fa-plus" id="btnSave">@Resources.Resource.Save</a>
            <a class="btn btn-success fa fa-file-excel-o" id="btnPrintExcel">@Resources.Resource.PrintExcel</a>
        </div>

        <div class="col-lg-12" style="margin-top:10px;">
            <table id="tdataTable" class="table table-striped table-bordered table-hover dataTable no-footer dtr-inline" style="width:100%;cursor:pointer" cellspacing="0">
                <thead>
                    <tr>
                        <th>@Resources.Resource.Country</th>
                        <th>@Resources.Resource.InsUserName</th>
                        <th>@Resources.Resource.Update</th>
                        <th>@Resources.Resource.Delete</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <div class="panel-footer">

    </div>
</div>
<div id="modal-container" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-content">
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script>
        $(document).ready(function () {
            $("#CounryName").focus();
            $(document).on('click', '#btnPrintExcel', function () {
                $(".dt-button").click();
            });
            $(document).on('click', '#btnSave', function () {
                window.location = "/Country/AddCountry";
            });
            $(document).on('click', '#btnSearch', function () {
                $('#tdataTable').DataTable().clear().draw();
                $('#tdataTable').DataTable().ajax.reload();
            });
            $(document).on('click', '#reload', function () {
                tabelMemRef.ajax.reload();
            });
            var tabelMemRef = $("#tdataTable").DataTable({
                "language": {
                    "emptyTable": '@Resources.Resource.EmptyTable',
                    "search": '@Resources.Resource.Search',
                    "loadingRecords": '@Resources.Resource.LoadingRecords',
                    "processing": '@Resources.Resource.Processing',
                    "zeroRecords": '@Resources.Resource.ZeroRecords',
                    "info": '@Resources.Resource.Info',
                    "infoEmpty": '@Resources.Resource.InfoEmpty',
                    "lengthMenu": '@Resources.Resource.LengthMenu',
                    "infoFiltered": '@Resources.Resource.InfoFiltered',
                    "paginate": {
                        "previous": '@Resources.Resource.Previous',
                        "next": '@Resources.Resource.Next',
                        "first": '@Resources.Resource.First',
                        "last": '@Resources.Resource.Last',
                    },
                    "aria": {
                        "sortAscending": '@Resources.Resource.SortAscending',
                        "sortDescending": '@Resources.Resource.SortDescending'
                    }
                },
                "searching": false,
                "scrollX": true,
                "columnDefs": [
                    {
                        "className": "dt-center",
                        "targets": "_all",
                        "orderable": false,
                    }],
                dom: 'Bfrtip',
                buttons: [
                    {
                        messageTop: '@Resources.Resource.Country',
                        extend: 'excelHtml5',
                        exportOptions: {
                            columns: [0, 1, 2]
                        }
                    }
                ],
                ajax: {
                    "type": "POST",
                    url: "/Country/GetAllCountry",
                    "data": function (d) {
                        d.CounryName = $("#CounryName").val();
                    },
                    dataSrc: ""
                },
                columns: [
                    {
                        data: "CounryName"
                    },
                    {
                        data: "UserName"
                    },
                    {
                        data: "CountryID",
                        render: function (data, type, r) {
                             return "<a  class='btn btn-success btn-circle fa fa-edit' href='/Country/UpdateCountry/" + data + " '></a>";
                        }
                    },
                    {
                        data: "CountryID",
                        render: function (data, type, r) {
                             return "<a  class='btn btn-danger btn-circle fa fa-trash-o' href='/Country/DeleteCountry/" + data + " '></a>";
                        }
                    }
                ]
            });
        });
</script>
}

